<?php

namespace PHPCore\SimpleHtmlDom\Tests;

/**
 * Tests the fopen part of HtmlWeb
 */
class HtmlWebFopenTest extends WebTest
{
	protected function setUp(): void
	{
		if (!(ini_get('allow_url_fopen'))) {
			$this->markTestSkipped('allow_url_fopen must be enabled for this test.');
		}
		parent::setUp();
	}

	/** @dataProvider urlProvider */
	public function test_load_should_return_dom_object($url)
	{
		$this->assertNotNull($this->web->load($url));
	}

	public function test_load_should_return_null_on_negative_response()
	{
		$this->assertNull($this->web->load('https://simplehtmldom.sourceforge.io/a.html'));
	}

	public function test_load_should_return_null_for_pages_larger_than_max_file_size()
	{
		$this->assertNull($this->web->load('https://www.w3.org/TR/html52/single-page.html'));
	}
}
